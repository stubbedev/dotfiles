# Optimized PipeWire configuration for USB docks with KVM switches
# This configuration increases buffer sizes to prevent audio popping/crackling
# when using USB audio devices connected through docking stations and KVM switches.
#
# The larger quantum values (buffer sizes) compensate for:
# - USB communication latency
# - KVM switch electrical noise and timing jitter
# - Additional latency from the dock's USB hub
#
# Quantum size reference:
# - 128 samples @ 48kHz = ~2.7ms (low latency, may cause pops with USB/KVM)
# - 1024 samples @ 48kHz = ~21ms (stable for USB docks, imperceptible for playback)
# - 2048 samples @ 48kHz = ~42ms (maximum stability, use if 1024 still has issues)

context.properties = {
    default.clock.rate = 48000
    default.clock.quantum = 1024
    default.clock.min-quantum = 512
    default.clock.max-quantum = 2048
}

# Stable settings for PulseAudio compatibility layer
pulse.properties = {
    pulse.min.req = 1024/48000       # 21ms minimum request
    pulse.min.quantum = 1024/48000   # 21ms minimum quantum
    pulse.min.frag = 1024/48000      # 21ms minimum fragment
}
