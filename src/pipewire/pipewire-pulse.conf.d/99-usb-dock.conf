# PulseAudio compatibility layer settings for USB docks with KVM switches
# This configures the PulseAudio interface that many applications use
#
# These settings increase buffer sizes to prevent audio popping/crackling
# when using USB audio devices connected through docking stations and KVM switches.

pulse.properties = {
    # Increase default stream latency for USB dock stability
    pulse.min.req = 2048/48000        # 42ms minimum request size
    pulse.min.quantum = 2048/48000    # 42ms minimum quantum
    pulse.min.frag = 2048/48000       # 42ms minimum fragment size
    pulse.default.req = 2048/48000    # 42ms default request size
    pulse.default.frag = 2048/48000   # 42ms default fragment size
    pulse.default.tlength = 4096/48000  # 85ms default target length
    pulse.min.latency = 2048/48000    # 42ms minimum latency
    
    # Prevent suspend/idle to avoid pops when opening pavucontrol
    pulse.idle.timeout = 0            # Never idle PulseAudio streams
}

stream.properties = {
    node.latency = 2048/48000         # 42ms stream latency
    resample.quality = 4              # Use medium quality resampling for lower CPU usage
    node.pause-on-idle = false        # Don't pause streams when idle
    session.suspend-timeout-seconds = 0  # Never suspend
}
