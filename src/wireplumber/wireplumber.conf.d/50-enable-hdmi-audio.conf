# Enable HDMI/DisplayPort audio by configuring IEC958 switches
# These switches control digital audio output (SPDIF/HDMI)

monitor.alsa.rules = [
  {
    matches = [
      {
        node.name = "~alsa_output.*hdmi*"
      }
      {
        node.name = "~alsa_output.*HDMI*"
      }
      {
        node.name = "~alsa_output.*DisplayPort*"
      }
    ]
    actions = {
      update-props = {
        api.alsa.use-acp = true
        session.suspend-timeout-seconds = 0
        node.pause-on-idle = false
        # Larger buffers to prevent initial pop when starting playback
        api.alsa.headroom = 8192
        api.alsa.period-size = 2048
        api.alsa.period-num = 3
        api.alsa.start-delay = 0
      }
    }
  }
]

monitor.alsa.properties = {
  alsa.reserve = false
}
